# 텍스트 기반 로그라이크 게임 - 기능 명세서

---

## 🎮 게임 개요

**장르**: 텍스트 기반 로그라이크 RPG  
**플랫폼**: 모바일 (React Native)  
**진행 방식**: 텍스트 읽기 + 선택지 선택으로 스토리 진행

---

## 🎯 핵심 게임 메커니즘

### **1. 씬 기반 게임 진행**
- **씬(Scene)**: 게임의 기본 단위. 각 씬은 텍스트와 선택지를 포함
- **챕터(Chapter)**: 여러 씬을 묶은 단위. 휴식방과 스토리로 구분
- **선택지 시스템**: 플레이어 선택에 따라 다음 씬으로 이동
- **조건부 씬 등장**: 게임 상태에 따라 특정 씬만 등장
- **랜덤 씬 선택**: 조건을 만족하는 씬들 중 랜덤 선택

### **2. 확률 기반 선택지**
- **기본 확률**: 각 선택지에 기본 성공률 설정
- **능력치 보정**: 힘/민첩/지혜/카리스마에 따라 확률 증가
- **상태 보정**: 버프/디버프 상태에 따라 확률 변화
- **아이템 보정**: 보유 아이템에 따라 확률 증가
- **성공/실패 분기**: 확률 결과에 따라 다른 씬으로 이동

### **3. 조건 시스템**
- **복합 조건**: 여러 조건을 조합하여 복잡한 등장 조건 설정
- **우선순위 조건**: 특정 상황에서 다른 씬보다 우선 등장
- **조건 평가**: 플레이어 상태, 보유 아이템, 게임 진행도 등 종합 판단
- **동적 조건**: 게임 진행에 따라 씬 등장 조건이 변화

## 🎲 캐릭터 시스템

### **1. 기본 능력치**
- **힘(Strength)**: 0-100 범위, 전투 관련 선택지에 영향
- **민첩(Agility)**: 0-100 범위, 회피/도주 관련 선택지에 영향  
- **지혜(Wisdom)**: 0-100 범위, 마법/학습 관련 선택지에 영향
- **카리스마(Charisma)**: 0-100 범위, 대화/설득 관련 선택지에 영향

### **2. 자원**
- **체력(Health)**: 0-3 범위, 0이 되면 게임오버
- **정신력(Mind)**: 0-3 범위, 0이 되면 게임오버  
- **재화(Gold)**: 0-4 범위, 아이템 구매에 사용

### **3. 경험치 및 레벨**
- **능력치 경험치**: 각 능력치별 독립적 경험치 획득
- **레벨업 방식**: 수동 레벨업 (플레이어가 직접 선택)
- **레벨 경험치**: 전체 레벨 별도 관리, 자동 레벨업
- **연쇄 레벨업**: 충분한 경험치 시 한 번에 여러 레벨 상승

### **4. 스킬 시스템 (12종류)**
- **전투**: 무술(3단계), 위협(3단계)
- **이동**: 달리기(2단계), 은신(3단계)  
- **기술**: 소매치기(2단계), 손재주(3단계)
- **사회**: 친화력(3단계), 화술(3단계)
- **지적**: 성리학(2단계), 관찰력(3단계)
- **특수**: 부적술(3단계), 직감(3단계), 생존(3단계)

### **5. 상태 및 플래그**
- **임시 버프**: 일시적으로 능력을 향상시키는 긍정적 효과
- **디버프 상태**: 플레이어에게 불리하게 작용하는 부정적 상태
- **환경 상태**: 현재 위치나 상황을 나타내는 중립적 상태
- **진행 플래그**: 스토리 진행 상황과 중요한 선택 결과 기록
- **상태 상호작용**: 여러 상태가 조합되어 새로운 효과 발생

### **6. 아이템 시스템**
- **아이템 분류**: 영구적으로 보관되는 아이템과 임시 사용 아이템 구분
- **인벤토리 관리**: 동일 아이템의 중복 보유 및 수량 관리
- **게임플레이 영향**: 선택지 성공률 향상 및 새로운 선택지 제공
- **획득 및 소모**: 이벤트를 통한 획득과 사용을 통한 소모 시스템

### **7. 커스텀 변수**
- **사용자 정의 수치**: 게임 내에서 특수한 의미를 가지는 수치값
- **실시간 참조**: 텍스트 내에서 현재 변수값을 자동으로 표시
- **복잡한 조건**: 변수를 활용하여 정교한 씬 등장 조건 설정
- **스토리 연속성**: 플레이어의 선택이 미래 사건에 영향을 미치도록 반영

## 🏗️ 게임 진행 시스템

### **1. 층 기반 구조**
- **10층 구조**: 게임은 1층부터 10층까지 진행
- **층별 진행**: 각 층마다 스토리 챕터와 휴식방 존재
- **층 이동**: 스토리 클리어 후 다음 층으로 이동

### **2. 사망 및 부활**
- **사망 조건**: 체력 또는 정신력이 0에 도달
- **사망 횟수 추적**: 전체 사망 횟수 + 층별 사망 횟수 기록
- **부활 시스템**: 사망 시 휴식방에서 자원 회복 후 재시작

### **3. 씬 진행 추적**
- **완료 씬**: 현재 챕터에서 완료한 씬들 기록
- **방문 씬**: 전체 게임에서 방문한 모든 씬 기록 (최초 방문 판별용)
- **반복 가능**: 일부 씬은 반복 실행 가능

### **4. 챕터 관리**
- **휴식방**: 안전한 공간에서 캐릭터 관리 및 준비
- **스토리 진행**: 메인 게임플레이가 이루어지는 핵심 구간
- **자동 전환**: 특정 조건 만족 시 다음 챕터로 자동 이동
- **수동 전환**: 플레이어 선택에 의한 챕터 이동

---

## 🎨 사용자 인터페이스

### **1. 메인 화면 구성**
- **상단 헤더**: 현재 능력치, 자원, 진행 상황 표시
- **중앙 콘텐츠**: 현재 씬 텍스트 + 이전 씬 히스토리
- **하단 선택지**: 플레이어가 선택 가능한 옵션들
- **푸터**: 현재 층, 사망 횟수 등 부가 정보

### **2. 텍스트 표현 시스템**
- **상황 반응형 텍스트**: 플레이어 상태에 따라 내용이 자동 변화
- **실시간 값 표시**: 현재 능력치, 자원 상태 등을 텍스트에 직접 표시
- **조건부 내용**: 특정 조건을 만족할 때만 보이는 텍스트 구간
- **시각적 강조**: 중요한 정보를 색상과 효과로 구분하여 표시

### **3. 시각적 연출**
- **텍스트 효과**: 다양한 방식으로 텍스트 등장 및 강조
- **분위기 연출**: 상황에 맞는 화면 효과로 몰입도 향상
- **상태 피드백**: 캐릭터 상태를 시각적으로 즉시 인식 가능
- **동적 반응**: 게임 상황에 따라 자동으로 적절한 효과 적용

### **4. 상호작용 시스템**
- **조건부 선택지**: 능력치나 아이템 부족 시 선택 불가능
- **확률 힌트**: 선택지별 성공 가능성 정보 제공
- **빠른 진행**: 제스처를 통한 효율적인 게임 진행 지원
- **선택지 필터링**: 상황에 따라 적절한 선택지만 표시

---

## ⚙️ 기술 기능

### **1. 데이터 관리**
- **JSON 기반 설정**: 모든 게임 데이터를 JSON으로 관리
- **동적 텍스트**: 변수 삽입 기능으로 텍스트 내 값 동적 표시
- **텍스트 효과**: 색상, 강조 표시 등 시각적 효과 태그
- **데이터 검증**: 게임 데이터 무결성 자동 검사

### **2. 저장 시스템**
- **자동 저장**: 게임 진행 상황 실시간 자동 저장
- **버전 호환성**: 게임 업데이트 시 기존 저장 데이터 보호
- **방문 기록**: 플레이어가 방문한 씬들 영구 추적
- **보안 저장**: 중요 데이터 암호화 저장

### **3. 성능 최적화**
- **메모리 관리**: 효율적인 텍스트 렌더링 및 메모리 사용
- **저장 최적화**: 불필요한 저장 작업 방지
- **애니메이션 최적화**: 부드러운 텍스트 및 UI 애니메이션

---

## 🔧 개발 및 관리 도구

### **1. 게임 데이터 검증**
- **자동 검증**: 시나리오 작성 시 오류 자동 탐지
- **참조 무결성**: ID 참조 및 링크 검사
- **구조 검증**: JSON 데이터 구조 정합성 확인

### **2. 시나리오 관리**  
- **체크리스트**: 시나리오 완성도 확인
- **흐름 검증**: 씬 간 연결 및 조건 검사
- **컨텐츠 통계**: 게임 분량 및 복잡도 분석

### **3. 디버깅 지원**
- **실시간 로그**: 게임 진행 상황 상세 추적
- **상태 표시**: 현재 게임 상태 시각적 확인
- **테스트 자동화**: 게임 로직 자동 검증

---

## 📦 확장성 및 유지보수

### **1. 컴포넌트 모듈화**
- **애니메이션 시스템**: 다양한 텍스트 효과를 위한 독립 컴포넌트들
- **기능별 분리**: 각 게임 기능을 독립적 모듈로 구성
- **중앙 집중식 상태**: 일관된 데이터 관리 구조

### **2. 설정 중앙 관리**
- **게임 설정**: 기본 게임 규칙 및 밸런스 조정
- **애니메이션 설정**: 시각적 효과 세부 조정
- **배경 효과 설정**: 분위기 연출 요소 관리
- **경험치 설정**: 레벨링 밸런스 및 진행도 조정

---

## 🎲 게임 컨텐츠

### **1. 스킬 시스템 (12종류)**
- **전투 계열**: 무술(3단계), 위협(3단계)
- **이동 계열**: 달리기(2단계), 은신(3단계)
- **기술 계열**: 소매치기(2단계), 손재주(3단계)
- **사회 계열**: 친화력(3단계), 화술(3단계)
- **지적 계열**: 성리학(2단계), 관찰력(3단계)
- **특수 계열**: 부적술(3단계), 직감(3단계), 생존(3단계)

### **2. 상태 효과 시스템**
- **부정적 효과**: 배고픔, 피곤함, 상처, 중독 등
- **중립적 효과**: 안개 등 환경적 상태
- **긍정적 효과**: 축복, 활력 등 버프 상태
- **카테고리 분류**: 효과 타입별 체계적 관리

---

## 🏗️ 시스템 아키텍처

### **1. 설계 원칙**
- **관심사 분리**: 각 기능을 독립적 모듈로 구성
- **중앙집중 상태관리**: 모든 게임 상태를 하나의 소스에서 관리
- **타입 안전성**: 개발 과정에서 오류 사전 방지

### **2. 아키텍처 패턴**
- **상태 관리 패턴**: 예측 가능한 상태 변화 보장
- **커스텀 훅**: 재사용 가능한 게임 로직 분리
- **서비스 계층**: 비즈니스 로직과 UI 분리

### **3. 성능 최적화**
- **메모리 최적화**: 효율적인 리소스 사용
- **지연 로딩**: 필요할 때만 데이터 로드
- **배치 처리**: 여러 작업을 효율적으로 처리

